@page
@model projetEsport.Areas.Admin.Pages.Equipes.DemandesModel
@{
    ViewData["Title"] = "Demandes";
}

<h1>Demandes création d'équipes</h1>

<div>
    <h4>Equipe</h4>

    <table class="table">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Equipes.FirstOrDefault().Equipe.Nom)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Equipes.FirstOrDefault().Equipe.Nom)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Equipes.FirstOrDefault().Equipe.Membres)
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var equipe in Model.Equipes)
            {
                <tr>
                    <td>
                        @equipe.Equipe.Nom
                    </td>
                    <td>
                        @equipe.Equipe.Nom
                    </td>
                    <td>
                        <ul class="membres-equipe-demandes">
                            @foreach (var i in equipe.Invitations)
                            {
                                <li class="@(i.IsAccepted ? "badge badge-success" : "badge badge-danger")">@i.Licencie.Pseudo</li>
                            }
                        </ul>
                    </td>
                    <td>
                        <form method="post">
                            <input name="id" value="@equipe.ID" type="hidden" />
                            @if (equipe.Invitations.Any(i => i.IsAccepted == false))
                            {
                                <input type="submit" class="btn btn-success" asp-page-handler="ApproveEquipe" asp-route-id="@equipe.ID" value="Approve" disabled />
                            }
                            else
                            {
                                <input type="submit" class="btn btn-success" asp-page-handler="ApproveEquipe" asp-route-id="@equipe.ID" value="Approve"/>
                            }
                        </form>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
<div>
    <a asp-page="./Index">Back to List</a>
</div>
